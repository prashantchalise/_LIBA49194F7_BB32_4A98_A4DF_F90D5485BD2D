function randomDirection(e=!0){const t=e?Direction.DiagonalDown:Direction.Vertical;return randomIntInRange(0,t)}function getWordRowCol(e,t,o,i){var n=t,r=o;return e===Direction.Horizontal||e===Direction.DiagonalDown?n+=i:e===Direction.DiagonalUp&&(n-=i),(e===Direction.Vertical||e===Direction.DiagonalDown||e===Direction.DiagonalUp)&&(r+=i),{row:n,col:r}}function reverseWord(e){return e.split("").reverse().join("")}function randomChar(){return String.fromCharCode(randomIntInRange(65,90))}function createGrid(e){const t=e.size,o=[];for(let e=0;e<t.height;e++)o.push(Array(t.width).fill(void 0));return o}function cloneGrid(e){const t=[];return e.forEach((e=>t.push([...e]))),t}function WSView(e,t,o,i,n,r,a){this.fontName=t,this.fontWeight=o,this.pad=a,this.panelCtx=i,this.cursorCtx=n,this.puzzle=e,this.width=r,this.cell=Math.floor(this.width/this.puzzle.COLS),this.width=this.cell*this.puzzle.COLS,this.height=this.puzzle.ROWS*this.cell,this.fontSize=Math.floor((this.cell-this.pad)/1.6),this.fontSize<10&&(this.fontSize=10),this.fontString=this.fontWeight+" "+this.fontSize+"pt "+this.fontName,this.panelCtx.font=this.fontString,this.tokenWidth=this.panelCtx.measureText("A").width,this.foundColor="rgba(0, 230, 0, 0.3)",this.seekColor="#ff00ff4d",this.lineWidth=1.8*this.tokenWidth,this.lineCap="round",this.colors=[{seek:"#ff00ff4d",found:"#00e60066"},{seek:"#ff00ff4d",found:"#e6000066"},{seek:"#ff00ff4d",found:"#0058e666"},{seek:"#ff00ff4d",found:"#e600c766"},{seek:"#ff00ff4d",found:"#e2e60066"},{seek:"#ff00ff4d",found:"#00e6bf66"},{seek:"#ff00ff4d",found:"#00ace666"},{seek:"#ff00ff4d",found:"#e6860066"},{seek:"#ff00ff4d",found:"#e6500066"},{seek:"#ff00ff4d",found:"#b000e666"},{seek:"#ff00ff4d",found:"#a8e60066"},{seek:"#ff00ff4d",found:"#00167566"}]}!function(e){function t(e,t,n){var r=e[0],a=/er/.test(n)?g:/bl/.test(n)?f:h,s=n==m?{checked:r[h],disabled:r[f],indeterminate:"true"==e.attr(g)||"false"==e.attr(p)}:r[a];if(/^(ch|di|in)/.test(n)&&!s)o(e,a);else if(/^(un|en|de)/.test(n)&&s)i(e,a);else if(n==m)for(a in s)s[a]?o(e,a,!0):i(e,a,!0);else t&&"toggle"!=n||(t||e[x]("ifClicked"),s?r[w]!==c&&i(e,a):o(e,a))}function o(t,o,n){var m=t[0],x=t.parent(),v=o==h,k=o==g,S=o==f,b=k?p:v?u:"enabled",N=r(t,b+a(m[w])),W=r(t,o+a(m[w]));if(!0!==m[o]){if(!n&&o==h&&m[w]==c&&m.name){var _=t.closest("form"),z='input[name="'+m.name+'"]';(z=_.length?_.find(z):e(z)).each((function(){this!==m&&e(this).data(l)&&i(e(this),o)}))}k?(m[o]=!0,m[h]&&i(t,h,"force")):(n||(m[o]=!0),v&&m[g]&&i(t,g,!1)),s(t,v,o,n)}m[f]&&r(t,y,!0)&&x.find("."+d).css(y,"default"),x[C](W||r(t,o)||""),S?x.attr("aria-disabled","true"):x.attr("aria-checked",k?"mixed":"true"),x[I](N||r(t,b)||"")}function i(e,t,o){var i=e[0],n=e.parent(),l=t==h,c=t==g,m=t==f,x=c?p:l?u:"enabled",v=r(e,x+a(i[w])),k=r(e,t+a(i[w]));!1!==i[t]&&((c||!o||"force"==o)&&(i[t]=!1),s(e,l,x,o)),!i[f]&&r(e,y,!0)&&n.find("."+d).css(y,"pointer"),n[I](k||r(e,t)||""),m?n.attr("aria-disabled","false"):n.attr("aria-checked","false"),n[C](v||r(e,x)||"")}function n(t,o){t.data(l)&&(t.parent().html(t.attr("style",t.data(l).s||"")),o&&t[x](o),t.off(".i").unwrap(),e(v+'[for="'+t[0].id+'"]').add(t.closest(v)).off(".i"))}function r(e,t,o){if(e.data(l))return e.data(l).o[t+(o?"":"Class")]}function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e,t,o,i){i||(t&&e[x]("ifToggled"),e[x]("ifChanged")[x]("if"+a(o)))}var l="iCheck",d=l+"-helper",c="radio",h="checked",u="un"+h,f="disabled",p="determinate",g="in"+p,m="update",w="type",C="addClass",I="removeClass",x="trigger",v="label",y="cursor",k=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);e.fn[l]=function(r,a){var s='input[type="checkbox"], input[type="'+c+'"]',u=e(),p=function(t){t.each((function(){var t=e(this);u=t.is(s)?u.add(t):u.add(t.find(s))}))};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(r))return r=r.toLowerCase(),p(this),u.each((function(){var o=e(this);"destroy"==r?n(o,"ifDestroyed"):t(o,!0,r),e.isFunction(a)&&a()}));if("object"!=typeof r&&r)return this;var y=e.extend({checkedClass:h,disabledClass:f,indeterminateClass:g,labelHover:!0,aria:!1},r),S=y.handle,b=y.hoverClass||"hover",N=y.focusClass||"focus",W=y.activeClass||"active",_=!!y.labelHover,z=y.labelHoverClass||"hover",R=0|(""+y.increaseArea).replace("%","");return("checkbox"==S||S==c)&&(s='input[type="'+S+'"]'),-50>R&&(R=-50),p(this),u.each((function(){var r=e(this);n(r);var a=this,s=a.id,u={position:"absolute",top:p=-R+"%",left:p,display:"block",width:u=100+2*R+"%",height:u,margin:0,padding:0,background:"#fff",border:0,opacity:0},p=k?{position:"absolute",visibility:"hidden"}:R?u:{position:"absolute",opacity:0},g="checkbox"==a[w]?y.checkboxClass||"icheckbox":y.radioClass||"i"+c,S=e(v+'[for="'+s+'"]').add(r.closest(v)),D=!!y.aria,L=l+"-"+Math.random().toString(36).replace("0.",""),T='<div class="'+g+'" '+(D?'role="'+a[w]+'" ':"");S.length&&D&&S.each((function(){T+='aria-labelledby="',this.id?T+=this.id:(this.id=L,T+=L),T+='"'})),T=r.wrap(T+"/>")[x]("ifCreated").parent().append(y.insert),u=e('<ins class="'+d+'"/>').css(u).appendTo(T),r.data(l,{o:y,s:r.attr("style")}).css(p),y.inheritClass&&T[C](a.className||""),y.inheritID&&s&&T.attr("id",l+"-"+s),"static"==T.css("position")&&T.css("position","relative"),t(r,!0,m),S.length&&S.on("click.i mouseover.i mouseout.i touchbegin.i touchend.i",(function(o){var i=o[w],n=e(this);if(!a[f]){if("click"==i){if(e(o.target).is("a"))return;t(r,!1,!0)}else _&&(/ut|nd/.test(i)?(T[I](b),n[I](z)):(T[C](b),n[C](z)));if(!k)return!1;o.stopPropagation()}})),r.on("click.i focus.i blur.i keyup.i keydown.i keypress.i",(function(e){var t=e[w];return e=e.keyCode,"click"!=t&&("keydown"==t&&32==e?(a[w]==c&&a[h]||(a[h]?i(r,h):o(r,h)),!1):void("keyup"==t&&a[w]==c?a[h]||o(r,h):/us|ur/.test(t)&&T["blur"==t?I:C](N)))})),u.on("click mousedown mouseup mouseover mouseout touchbegin.i touchend.i",(function(e){var o=e[w],i=/wn|up/.test(o)?W:b;if(!a[f]){if("click"==o?t(r,!1,!0):(/wn|er|in/.test(o)?T[C](i):T[I](i+" "+W),S.length&&_&&i==b&&S[/ut|nd/.test(o)?I:C](z)),!k)return!1;e.stopPropagation()}}))}))}}(window.jQuery||window.Zepto);const Direction={Horizontal:0,Vertical:1,DiagonalUp:2,DiagonalDown:3};var cleanWord=function(e){return e.split(" ").join("").toUpperCase()},sortWordList=function(e){return e.sort((function(e,t){return t.length-e.length}))},randomIntInRange=function(e,t){var o=Math.ceil(e),i=Math.floor(t);return Math.floor(Math.random()*(i-o+1))+o},randomBool=function(){return Math.random()>=.5},minRowIndex=function(){return 0},maxRowIndex=function(e,t){var o=e.length,i=t.length;if(o>i)throw new Error("very long:  ".concat(e," "));return i-o},minColIndex=function(){return 0},maxColIndex=function(e,t){var o=e.length,i=t[0].length;if(o>i)throw new Error("Word ".concat(e," is too long"));return i-o};class WS{constructor(e,t,o,i){this._words=e,this.words=[],this.size=t,this.allowBackwards=o,this.allowDiagonals=i,this.intersectionCount=0,this.minIntersectionCount=parseInt((this._words.length/3).toString(),10)+2,console.log(this.minIntersectionCount)}placeWordRandom(e,t,o){var i=function(){var i,n,a,s,l=this.allowBackwards&&randomBool();const d=randomDirection(this.allowDiagonals),c=cloneGrid(e),h=l?reverseWord(t):t;let u=randomIntInRange(minRowIndex(),maxRowIndex(t,c));d===Direction.DiagonalUp&&(u=e.length-u-1);const f=randomIntInRange(minColIndex(),maxColIndex(t,c));if((()=>{for(let t=0;t<h.length;t++){const{row:o,col:i}=getWordRowCol(d,u,f,t);var e=c[o][i];if(void 0!==e&&h[t]!=e)return!1}return!0})()){for(i=0;i<h.length;i++)n=getWordRowCol(d,u,f,i),null!=c[n.row][n.col]&&(r=!0),c[n.row][n.col]=h[i];return a=getWordRowCol(d,u,f,0),s=getWordRowCol(d,u,f,h.length-1),o.rowi=a.row,o.coli=a.col,o.rowf=s.row,o.colf=s.col,o.found=!0,o.strike=!1,o.direction=d,c}}.bind(this);let n;let r=!1;for(let e=1;e<=1e3;e++)if(r=!1,n=i(),void 0!==n){let e=this.words.filter((e=>1==e.isCopied));if(this.intersectionCount<this.minIntersectionCount&&!r&&e.length>3)continue;return n}throw new Error(`Failed Placing: ${t} in grid after 1000 times.`)}_wsg122422022(e){this._words.forEach((e=>{this.words.push({word:Object.assign({},e),_word:cleanWord(e.Word),isCopied:0})}));var t=sortWordList(this.words.map((e=>cleanWord(e._word)))),o=[];let i,n=0;for(;this.size.height<=22;){let r=createGrid({size:this.size});if(this.intersectionCount=0,o=[],t.forEach((e=>{try{let t=this.words.filter((t=>t._word===e&&0==t.isCopied));if(t.length>0){r=this.placeWordRandom(r,e,t[0]);let i=this.words.filter((e=>1==e.isCopied));this.intersectionCount<this.minIntersectionCount&&i.length>3&&this.intersectionCount++,o.push(e),t[0].isCopied=1}}catch(e){console.error(e)}})),r=r.map((function(e){return e.map((function(e){return null!=e?e:randomChar()}))})),o.length==t.length){i=r;break}this.size.height+=1,this.size.width+=e?n%2:1,n++,this.words=[],this._words.forEach((e=>{this.words.push({word:Object.assign({},e),_word:cleanWord(e.Word),isCopied:0})}))}return this.words.forEach((e=>{const t=this._words.filter((t=>t.Word==e._cword));t.length>0&&(e.word=t[0])})),console.log(this.intersectionCount),{grid:i,placedWords:o}}}WSView.prototype.getD=function(){return{width:this.width,height:this.height}},WSView.prototype.draw=function(){this.drawGrid(),this.drawFound()},WSView.prototype.drawGrid=function(){var e,t;for(this.panelCtx.clearRect(0,0,this.width,this.height),this.panelCtx.lineWidth=1,this.panelCtx.textBaseline="middle",this.panelCtx.textAlign="center",this.panelCtx.fillStyle="#333",this.panelCtx.font=this.fontString,e=0;e<this.puzzle.ROWS;e++)for(t=0;t<this.puzzle.COLS;t++)this.panelCtx.fillText(this.puzzle.grid[e][t],this.cell/2+t*this.cell,this.cell/2+e*this.cell),this.panelCtx.strokeStyle="#ccc",this.panelCtx.strokeRect(t*this.cell,t*this.cell,e*this.cell,e*this.cell);this.panelCtx.strokeStyle="#666",this.panelCtx.strokeRect(0,0,this.width,this.height)},WSView.prototype.drawFound=function(){var e,t,o=this.cursorCtx;for(o.clearRect(0,0,this.width,this.height),o.lineWidth=this.lineWidth,o.strokeStyle=this.foundColor,o.lineCap=this.lineCap,e=0;e<this.puzzle.words.length;e++)if((t=this.puzzle.words[e]).found){var i=this.cell/2+t.coli*this.cell,n=this.cell/2+t.rowi*this.cell,r=this.cell/2+t.colf*this.cell,a=this.cell/2+t.rowf*this.cell;o.beginPath(),o.moveTo(i,n),o.lineTo(r,a),o.stroke()}},WSView.prototype.drawLoopFound=function(){angular.element(document.body).injector().get("$rootScope");var e=this.cursorCtx;e.clearRect(0,0,this.width,this.height),this.puzzle.words.forEach((function(e){e.strike=!1})),e.lineWidth=this.lineWidth,e.strokeStyle=this.foundColor,e.lineCap=this.lineCap;var t=0,o=this,i=setInterval((function(){var n;if(t>=o.puzzle.words.length&&(clearInterval(i),e.clearRect(0,0,o.width,o.height),o.drawLoopFound()),void 0!==(n=o.puzzle.words[t])&&n.found){n.strike=!0;var r=o.cell/2+n.coli*o.cell,a=o.cell/2+n.rowi*o.cell,s=o.cell/2+n.colf*o.cell,l=o.cell/2+n.rowf*o.cell;e.beginPath(),e.moveTo(r,a),e.lineTo(s,l),setTimeout((function(){e.stroke(),n.strike=!0,t++}),1e3)}}),2e3)},rolpo_app.requires.push("ngStorage"),rolpo_app.constant("ngAuthSettings",{apiServiceBaseUri:serviceBase,clientId:"rolpo.com"}),function(){"use strict";rolpo_app.factory("baseService",["$http","ngAuthSettings",function(e,t){var o=t.apiServiceBaseUri,i={};return i.UpdateUserSession=function(t){return e({method:"post",url:o+"api/UserSession/UpdateUserSession",data:t})},i.DDLDefaultFilter=function(){return{PageName:"AddEditCategory",FilterList:[]}},i}])}(),function(){"use strict";rolpo_app.factory("localService",["$http","$filter","$localStorage",function(e,t,o){var i={},n=!1,r={MsgType:"",MsgText:""},a={USessionId:BaseHelper.generateGUID(),UserName:BaseHelper.getRName().Name,Location:"",NEWWS:null,PostReacted:[],_Current:{}};void 0!==o.__localwsusersession&&(a=o.__localwsusersession),o.__localwsusersession=a;var s=function(){o.__localwsusersession=angular.copy(a)},l=function(t){return e({method:"post",url:serviceBase+"api/Postreactions/AddReaction",data:t})};return i.loading=function(){return n},i.msg=function(){return r},i.__GET=function(){return a},i.__UPDATE=function(e){a=e,s()},i.GETGAME=function(){return void 0===a._Current&&(a._Current={}),a._Current},i.SAVEGAME=function(e){a._Current=e,s()},i.__UPDATEWS=function(e){a.NEWWS=e,o.__localwsusersession=angular.copy(a)},i.AddPostReaction=function(e,o){var i,d;if(r={MsgType:"",MsgText:""},console.log(e,o),void 0===a.PostReacted&&(a.PostReacted=[]),null!=(i=t("filter")(a.PostReacted,(function(t){return t.PostId===e})))&&i.length>0)return r.MsgType="ERROR",void(r.MsgText="Oops! You already submitted your reaction.");switch(d={PostId:e,Like_Count:!1,Love_Count:!1,Laugh_Count:!1,Shocked_Count:!1,Sad_Count:!1,Angry_Count:!1},o){case"LIKE":d.Like_Count=!0;break;case"LOVE":d.Love_Count=!0;break;case"LAUGH":d.Laugh_Count=!0;break;case"SHOCKED":d.Shocked_Count=!0;break;case"SAD":d.Sad_Count=!0;break;case"ANGRY":d.Angry_Count=!0}n=!0,l(d).then((function(e){r.MsgType="OK",r.MsgText=e.data+" Please refresh if needed.",a.PostReacted.push(d),s(),n=!1}),(function(){n=!1,r={MsgType:"ERROR",MsgText:"Oops! something went wrong."}}))},i}])}(),function(){"use strict";rolpo_app.controller("baseController",["$scope","$rootScope","localService","modalService","$uibModal","$uibModalStack","$filter",function(e,t,o,i,n,r){e.OpenLoginForm=function(){MSG({}),e.userloginsignupTitle="Login";n.open({animation:!0,scope:e,windowClass:"modal-custom-extension",templateUrl:"Rolpo_Login",backdrop:"static",keyboard:!1,modalFade:!0,size:""})},e.cancelEditing=function(){r.dismissAll()},e.dateOptions={"year-format":"'yy'","show-weeks":!1},e.OpenDate=function(e,t){e[t]=!0}}])}();class BaseHelper{static getRName(){return[{Id:1,Name:"Wordwhiz"},{Id:2,Name:"Scrabbleguru"},{Id:3,Name:"Texttangle"},{Id:4,Name:"Alphawizard"},{Id:5,Name:"Crosswordninja"},{Id:6,Name:"Anagramace"},{Id:7,Name:"Letterlover"},{Id:8,Name:"Wordwanderer"},{Id:9,Name:"Puzzleperfect"},{Id:10,Name:"Wordwonder"},{Id:11,Name:"Lexicobeat"},{Id:12,Name:"Grammarmaster"},{Id:13,Name:"Wordweaver"},{Id:14,Name:"Typetangle"},{Id:15,Name:"Spellingbee"},{Id:16,Name:"Scribblesaurus"},{Id:17,Name:"Penmanshippro"},{Id:18,Name:"Linguisticlegend"},{Id:19,Name:"Wordsmithy"},{Id:20,Name:"Typographytangle"},{Id:21,Name:"Orthographyogre"},{Id:22,Name:"Calligraphycat"},{Id:23,Name:"Phonetician"},{Id:24,Name:"Cryptocrafter"},{Id:25,Name:"Etymologician"},{Id:26,Name:"Semanticstalker"},{Id:27,Name:"Syntacticninja"},{Id:28,Name:"Vocabularaptor"},{Id:29,Name:"Graphemist"},{Id:30,Name:"Grammarghost"},{Id:31,Name:"Lexicographer"},{Id:32,Name:"Linguisticlion"},{Id:33,Name:"Orthologyoctopus"},{Id:34,Name:"Phonologyphoenix"},{Id:35,Name:"Semioticyeti"},{Id:36,Name:"Symbolist"},{Id:37,Name:"Lexologylizard"},{Id:38,Name:"Linguister"},{Id:39,Name:"Semasiologysiren"},{Id:40,Name:"Vocabularist"},{Id:41,Name:"Glossologygorgon"},{Id:42,Name:"Glottologygolem"},{Id:43,Name:"Lexicologyleprechaun"},{Id:44,Name:"Linguasphere"},{Id:45,Name:"Logographer"},{Id:46,Name:"Orthologos"},{Id:47,Name:"Phonologer"},{Id:48,Name:"Semasiology"},{Id:49,Name:"Glossary"},{Id:50,Name:"Wordwise"}][Math.floor(50*Math.random())]}static generateGUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}}const WS_STATUS={INIT:0,START:1,COMPLETE:2};